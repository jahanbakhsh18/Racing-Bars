{
  "version": 3,
  "sources": ["../../../../../../Modules/Membership/Account/SignUp/SignUpPage.tsx"],
  "sourcesContent": ["import { informationDialog, PropertyPanel, resolveUrl, serviceCall } from \"@serenity-is/corelib\";\nimport { SignUpForm, SignUpRequest, SignUpResponse } from \"../../../ServerTypes/Membership\";\nimport { MembershipValidationTexts, SignUpFormTexts } from \"../../../ServerTypes/Texts\";\nimport { AccountPanelTitle } from \"../AccountPanelTitle\";\n\nexport default function pageInit(opt: any) {\n    new SignUpPanel({ element: '#SignUpPanel', ...opt });\n}\n\nclass SignUpPanel extends PropertyPanel<SignUpRequest, any> {\n\n    protected override getFormKey() { return SignUpForm.formKey; }\n\n    private form: SignUpForm;\n\n    constructor(props: { element?: any } & any) {\n        super(props);\n\n        this.form = new SignUpForm(this.idPrefix);\n\n        this.form.Email.element.attr(\"autocomplete\", \"off\");\n        this.form.Password.element.attr(\"autocomplete\", \"new-password\");\n\n        this.form.ConfirmEmail.addValidationRule(this.uniqueName, e => {\n            if (this.form.ConfirmEmail.value !== this.form.Email.value) {\n                return MembershipValidationTexts.EmailConfirm;\n            }\n        });\n\n        this.form.ConfirmPassword.addValidationRule(this.uniqueName, e => {\n            if (this.form.ConfirmPassword.value !== this.form.Password.value) {\n                return MembershipValidationTexts.PasswordConfirmMismatch;\n            }\n        });\n    }\n\n    submitClick() {\n        if (!this.validateForm()) {\n            return;\n        }\n\n        var request = this.propertyGrid.save();\n        delete request.ConfirmEmail;\n        delete request.ConfirmPassword;\n\n        serviceCall({\n            url: resolveUrl('~/Account/SignUp'),\n            request: request,\n            onSuccess: (response: SignUpResponse) => {\n                informationDialog(SignUpFormTexts.Success, () => {\n                    window.location.href = resolveUrl('~/');\n                });\n            }\n        });\n    }\n\n    protected override renderContents() {\n        const id = this.useIdPrefix();\n        this.element.empty().append(<>\n            <AccountPanelTitle />\n\n            <div class=\"s-Panel p-4\">\n                <h5 class=\"text-center my-4\">{SignUpFormTexts.FormTitle}</h5>\n                <p id={id.FormInfo} class=\"text-center\">{SignUpFormTexts.FormInfo}</p>\n\n                <form id={id.Form} action=\"\" autocomplete=\"off\">\n                    <input autocomplete=\"false\" name=\"hidden\" type=\"text\" style=\"display:none;\" />\n                    <div id={id.PropertyGrid}></div>\n                    <div class=\"px-field\">\n                        <button id={id.SubmitButton} type=\"submit\" class=\"btn btn-primary my-4 w-100\"\n                            onClick={e => { e.preventDefault(); this.submitClick(); }}>\n                            {SignUpFormTexts.SubmitButton}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </>)\n    }\n}\n"],
  "mappings": "kRAAA,IAAAA,EAA0E,SAK3D,SAARC,EAA0BC,EAAU,CACvC,IAAIC,EAAYC,EAAA,CAAE,QAAS,gBAAmBF,EAAK,CACvD,CAFwBG,EAAAJ,EAAA,YAIxB,IAAMK,EAAN,MAAMA,UAAoB,eAAkC,CAErC,YAAa,CAAE,OAAOC,EAAW,OAAS,CAI7D,YAAYC,EAAgC,CACxC,MAAMA,CAAK,EAEX,KAAK,KAAO,IAAID,EAAW,KAAK,QAAQ,EAExC,KAAK,KAAK,MAAM,QAAQ,KAAK,eAAgB,KAAK,EAClD,KAAK,KAAK,SAAS,QAAQ,KAAK,eAAgB,cAAc,EAE9D,KAAK,KAAK,aAAa,kBAAkB,KAAK,WAAYE,GAAK,CAC3D,GAAI,KAAK,KAAK,aAAa,QAAU,KAAK,KAAK,MAAM,MACjD,OAAOC,EAA0B,YAEzC,CAAC,EAED,KAAK,KAAK,gBAAgB,kBAAkB,KAAK,WAAYD,GAAK,CAC9D,GAAI,KAAK,KAAK,gBAAgB,QAAU,KAAK,KAAK,SAAS,MACvD,OAAOC,EAA0B,uBAEzC,CAAC,CACL,CAEA,aAAc,CACV,GAAK,KAAK,aAAa,EAIvB,KAAIC,EAAU,KAAK,aAAa,KAAK,EACrC,OAAOA,EAAQ,aACf,OAAOA,EAAQ,mBAEf,eAAY,CACR,OAAK,cAAW,kBAAkB,EAClC,QAASA,EACT,UAAWN,EAACO,GAA6B,IACrC,qBAAkBC,EAAgB,QAAS,IAAM,CAC7C,OAAO,SAAS,QAAO,cAAW,IAAI,CAC1C,CAAC,CACL,EAJW,YAKf,CAAC,EACL,CAEmB,gBAAiB,CAChC,IAAMC,EAAK,KAAK,YAAY,EAC5B,KAAK,QAAQ,MAAM,EAAE,OAAOC,EAAAC,EAAA,CACxB,UAAAD,EAACE,EAAA,EAAkB,EAEnBF,EAAC,OAAI,MAAM,cACP,UAAAA,EAAC,MAAG,MAAM,mBAAoB,SAAAF,EAAgB,UAAU,EACxDE,EAAC,KAAE,GAAID,EAAG,SAAU,MAAM,cAAe,SAAAD,EAAgB,SAAS,EAElEE,EAAC,QAAK,GAAID,EAAG,KAAM,OAAO,GAAG,aAAa,MACtC,UAAAC,EAAC,SAAM,aAAa,QAAQ,KAAK,SAAS,KAAK,OAAO,MAAM,gBAAgB,EAC5EA,EAAC,OAAI,GAAID,EAAG,aAAc,EAC1BC,EAAC,OAAI,MAAM,WACP,SAAAA,EAAC,UAAO,GAAID,EAAG,aAAc,KAAK,SAAS,MAAM,6BAC7C,QAASL,GAAK,CAAEA,EAAE,eAAe,EAAG,KAAK,YAAY,CAAG,EACvD,SAAAI,EAAgB,aACrB,EACJ,GACJ,GACJ,GACJ,CAAG,CACP,CACJ,EArE4DR,EAAAC,EAAA,eAA5D,IAAMH,EAANG",
  "names": ["import_corelib", "pageInit", "opt", "SignUpPanel", "__spreadValues", "__name", "_SignUpPanel", "SignUpForm", "props", "e", "MembershipValidationTexts", "request", "response", "SignUpFormTexts", "id", "jsx", "Fragment", "AccountPanelTitle"]
}
